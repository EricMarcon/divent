<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Random communities — rcommunity • divent</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Random communities — rcommunity"><meta property="og:description" content="Draw random communities according to a probability distribution."><meta property="og:image" content="https://ericmarcon.github.io/entropart/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">divent</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.11</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/divent.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/extrapolation.html">Asymptotic Estimation, Interpolation and Extrapolation </a>
    </li>
    <li>
      <a href="../articles/phylogenies.html">Phylogenies in divent</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/EricMarcon/divent/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Random communities</h1>
    <small class="dont-index">Source: <a href="https://github.com/EricMarcon/divent/blob/HEAD/R/rcommunity.R" class="external-link"><code>R/rcommunity.R</code></a></small>
    <div class="hidden name"><code>rcommunity.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Draw random communities according to a probability distribution.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rcommunity</span><span class="op">(</span></span>
<span>  <span class="va">n</span>,</span>
<span>  size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">abd</span><span class="op">)</span>,</span>
<span>  prob <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  abd <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bootstrap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Chao2015"</span>, <span class="st">"Marcon2012"</span>, <span class="st">"Chao2013"</span><span class="op">)</span>,</span>
<span>  species_number <span class="op">=</span> <span class="fl">300</span>,</span>
<span>  distribution <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lnorm"</span>, <span class="st">"lseries"</span>, <span class="st">"geom"</span>, <span class="st">"bstick"</span><span class="op">)</span>,</span>
<span>  sd_lnorm <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  prob_geom <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  alpha_lseries <span class="op">=</span> <span class="fl">40</span>,</span>
<span>  coverage_estimator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ZhangHuang"</span>, <span class="st">"Chao"</span>, <span class="st">"Turing"</span>, <span class="st">"Good"</span><span class="op">)</span>,</span>
<span>  check_arguments <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>n</dt>
<dd><p>The number of communities to draw.</p></dd>


<dt>size</dt>
<dd><p>The number of individuals to draw in each community.</p></dd>


<dt>prob</dt>
<dd><p>A numeric vector containing probabilities.</p></dd>


<dt>abd</dt>
<dd><p>A numeric vector containing abundances.</p></dd>


<dt>bootstrap</dt>
<dd><p>The method used to obtain the probabilities to generate
bootstrapped communities from observed abundances.
If "Marcon2012", the probabilities are simply the abundances divided by the total
number of individuals (Marcon et al. 2012)
.
If "Chao2013" or "Chao2015" (by default), a more sophisticated approach is used
(see <a href="species_distribution.html">as_probabilities</a>) followingChao et al. (2013)
 or
Chao and Jost (2015)
.</p></dd>


<dt>species_number</dt>
<dd><p>The number of species.</p></dd>


<dt>distribution</dt>
<dd><p>The distribution of species abundances.
May be "lnorm" (log-normal), "lseries" (log-series), "geom" (geometric) or
"bstick" (broken stick).</p></dd>


<dt>sd_lnorm</dt>
<dd><p>The simulated log-normal distribution standard deviation.
This is the standard deviation on the log scale.</p></dd>


<dt>prob_geom</dt>
<dd><p>The proportion of ressources taken by successive species
of the geometric distribution.</p></dd>


<dt>alpha_lseries</dt>
<dd><p>Fisher's alpha in the log-series distribution.</p></dd>


<dt>coverage_estimator</dt>
<dd><p>An estimator of sample coverage used by <a href="coverage.html">coverage</a>.</p></dd>


<dt>check_arguments</dt>
<dd><p>If <code>TRUE</code>, the function arguments are verified.
Should be set to <code>FALSE</code> to save time when the arguments have been checked elsewhere.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An object of class <a href="species_distribution.html">abundances</a>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Communities of fixed <code>size</code> are drawn in a multinomial distribution according
to the distribution of probabilities provided by <code>prob</code>.
An abundance vector <code>abd</code> may be used instead of probabilities,
then <code>size</code> is by default the total number of individuals in the vector.
Random communities can be built by drawing in a multinomial law following
Marcon et al. (2012)
, or trying to estimate the
distribution of the actual community with <a href="species_distribution.html">as_probabilities</a>.
If <code>bootstrap</code> is "Chao2013", the distribution is estimated by a single
parameter model and unobserved species are given equal probabilities.
If <code>bootstrap</code> is "Chao2015", a two-parameter model is used and unobserved
species follow a geometric distribution.</p>
<p>Alternatively, the probabilities may be drawn following a classical
distribution: either lognormal ("lnorm")  (Preston 1948)

with given standard deviation (<code>sd_lnorm</code>; note that the mean is actually
a normalizing constant. Its values is set equal to 0 for the simulation of
the normal distribution of unnormalized log-abundances), log-series ("lseries")
(Fisher et al. 1943)
 with parameter <code>alpha_lseries</code>, geometric
("geom") one (Motomura 1932)
 with parameter <code>prob_geom</code>,
or broken stick ("bstick") (MacArthur 1957)
.
The number of simulated species is fixed by <code>species_number</code>, except for
"lseries" where it is obtained from <code>alpha_lseries</code> and <code>size</code>:
\(S=\alpha \ln(1 + size / \alpha)\).</p>
<p>Log-normal, log-series and broken-stick distributions are stochastic.
The geometric distribution is completely determined by its parameters.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Generate a community made of 100000 individuals among 300 species and fit it</span></span></span>
<span class="r-in"><span><span class="va">abundances</span> <span class="op">&lt;-</span> <span class="fu">rcommunity</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1</span>, size <span class="op">=</span> <span class="fl">1E5</span>, </span></span>
<span class="r-in"><span>  species_number <span class="op">=</span> <span class="fl">300</span>, distribution <span class="op">=</span> <span class="st">"lnorm"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">abundances</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="rcommunity-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Eric Marcon.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

