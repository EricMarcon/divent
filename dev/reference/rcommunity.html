<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Random communities — rcommunity • divent</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Random communities — rcommunity"><meta name="description" content="Draw random communities according to a probability distribution."><meta property="og:description" content="Draw random communities according to a probability distribution."><meta property="og:image" content="https://ericmarcon.github.io/divent/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">divent</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.4-99.9003</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/divent.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/arguments.html">Common Arguments of divent Functions</a></li>
    <li><a class="dropdown-item" href="../articles/extrapolation.html">Asymptotic Estimation, Interpolation and Extrapolation </a></li>
    <li><a class="dropdown-item" href="../articles/phylogenies.html">Phylogenies in divent</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/EricMarcon/divent/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Random communities</h1>
      <small class="dont-index">Source: <a href="https://github.com/EricMarcon/divent/blob/version_0.5/R/rcommunity.R" class="external-link"><code>R/rcommunity.R</code></a></small>
      <div class="d-none name"><code>rcommunity.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Draw random communities according to a probability distribution.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rcommunity</span><span class="op">(</span></span>
<span>  <span class="va">n</span>,</span>
<span>  size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">abd</span><span class="op">)</span>,</span>
<span>  prob <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  abd <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bootstrap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Chao2015"</span>, <span class="st">"Marcon2012"</span>, <span class="st">"Chao2013"</span><span class="op">)</span>,</span>
<span>  species_number <span class="op">=</span> <span class="fl">300</span>,</span>
<span>  distribution <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lnorm"</span>, <span class="st">"lseries"</span>, <span class="st">"geom"</span>, <span class="st">"bstick"</span><span class="op">)</span>,</span>
<span>  sd_lnorm <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  prob_geom <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  alpha_lseries <span class="op">=</span> <span class="fl">40</span>,</span>
<span>  coverage_estimator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ZhangHuang"</span>, <span class="st">"Chao"</span>, <span class="st">"Turing"</span>, <span class="st">"Good"</span><span class="op">)</span>,</span>
<span>  check_arguments <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>The number of communities to draw.</p></dd>


<dt id="arg-size">size<a class="anchor" aria-label="anchor" href="#arg-size"></a></dt>
<dd><p>The number of individuals to draw in each community.</p></dd>


<dt id="arg-prob">prob<a class="anchor" aria-label="anchor" href="#arg-prob"></a></dt>
<dd><p>A numeric vector containing probabilities.</p></dd>


<dt id="arg-abd">abd<a class="anchor" aria-label="anchor" href="#arg-abd"></a></dt>
<dd><p>A numeric vector containing abundances.</p></dd>


<dt id="arg-bootstrap">bootstrap<a class="anchor" aria-label="anchor" href="#arg-bootstrap"></a></dt>
<dd><p>The method used to obtain the probabilities to generate
bootstrapped communities from observed abundances.
If "Marcon2012", the probabilities are simply the abundances divided by the total
number of individuals Marcon2012adivent.
If "Chao2013" or "Chao2015" (by default), a more sophisticated approach is used
(see <a href="species_distribution.html">as_probabilities</a>) followingChao2013;textualdivent or
Chao2015;textualdivent.</p></dd>


<dt id="arg-species-number">species_number<a class="anchor" aria-label="anchor" href="#arg-species-number"></a></dt>
<dd><p>The number of species.</p></dd>


<dt id="arg-distribution">distribution<a class="anchor" aria-label="anchor" href="#arg-distribution"></a></dt>
<dd><p>The distribution of species abundances.
May be "lnorm" (log-normal), "lseries" (log-series), "geom" (geometric) or
"bstick" (broken stick).</p></dd>


<dt id="arg-sd-lnorm">sd_lnorm<a class="anchor" aria-label="anchor" href="#arg-sd-lnorm"></a></dt>
<dd><p>The simulated log-normal distribution standard deviation.
This is the standard deviation on the log scale.</p></dd>


<dt id="arg-prob-geom">prob_geom<a class="anchor" aria-label="anchor" href="#arg-prob-geom"></a></dt>
<dd><p>The proportion of ressources taken by successive species
of the geometric distribution.</p></dd>


<dt id="arg-alpha-lseries">alpha_lseries<a class="anchor" aria-label="anchor" href="#arg-alpha-lseries"></a></dt>
<dd><p>Fisher's alpha in the log-series distribution.</p></dd>


<dt id="arg-coverage-estimator">coverage_estimator<a class="anchor" aria-label="anchor" href="#arg-coverage-estimator"></a></dt>
<dd><p>An estimator of sample coverage used by <a href="coverage.html">coverage</a>.</p></dd>


<dt id="arg-check-arguments">check_arguments<a class="anchor" aria-label="anchor" href="#arg-check-arguments"></a></dt>
<dd><p>If <code>TRUE</code>, the function arguments are verified.
Should be set to <code>FALSE</code> to save time when the arguments have been checked elsewhere.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <a href="species_distribution.html">abundances</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Communities of fixed <code>size</code> are drawn in a multinomial distribution according
to the distribution of probabilities provided by <code>prob</code>.
An abundance vector <code>abd</code> may be used instead of probabilities,
then <code>size</code> is by default the total number of individuals in the vector.
Random communities can be built by drawing in a multinomial law following
Marcon2012a;textualdivent, or trying to estimate the
distribution of the actual community with <a href="species_distribution.html">as_probabilities</a>.
If <code>bootstrap</code> is "Chao2013", the distribution is estimated by a single
parameter model and unobserved species are given equal probabilities.
If <code>bootstrap</code> is "Chao2015", a two-parameter model is used and unobserved
species follow a geometric distribution.</p>
<p>Alternatively, the probabilities may be drawn following a classical
distribution: either lognormal ("lnorm")  Preston1948divent
with given standard deviation (<code>sd_lnorm</code>; note that the mean is actually
a normalizing constant. Its values is set equal to 0 for the simulation of
the normal distribution of unnormalized log-abundances), log-series ("lseries")
Fisher1943divent with parameter <code>alpha</code>, geometric
("geom") one Motomura1932divent with parameter <code>prob_geom</code>,
or broken stick ("bstick") MacArthur1957divent.
The number of simulated species is fixed by <code>species_number</code>, except for
"lseries" where it is obtained from <code>alpha_lseries</code> and <code>size</code>:
\(S=\alpha \ln(1 + size / \alpha)\).</p>
<p>Log-normal, log-series and broken-stick distributions are stochastic.
The geometric distribution is completely determined by its parameters.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Generate a community made of 100000 individuals among 300 species and fit it</span></span></span>
<span class="r-in"><span><span class="va">abundances</span> <span class="op">&lt;-</span> <span class="fu">rcommunity</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1</span>, size <span class="op">=</span> <span class="fl">1E5</span>, </span></span>
<span class="r-in"><span>  species_number <span class="op">=</span> <span class="fl">300</span>, distribution <span class="op">=</span> <span class="st">"lnorm"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="va">abundances</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="rcommunity-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Eric Marcon.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

